<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Adaptive Moose surveys.">
<title>Adaptive Moose Surveys • moosecounter</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Adaptive Moose Surveys">
<meta property="og:description" content="Adaptive Moose surveys.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script src="https://cdn.usefathom.com/script.js" data-site="KTMJHUPR" defer></script><link rel="icon" href="https://peter.solymos.org/favicon.ico">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">moosecounter</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8-0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="http://twitter.com/psolymos" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="http://github.com/psolymos" aria-label="GitHub">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="moosecounter">moosecounter<a class="anchor" aria-label="anchor" href="#moosecounter"></a>
</h1></div>
<blockquote>
<p>Adaptive Moose Surveys</p>
</blockquote>
<p>The R package and Shiny app implements count models to aid in estimating Moose populations and composition. Analyses are based on surveyed cells, residuals, point predictions, and prediction uncertainty help analysts to adaptively survey sampling units. As a result of adaptive sampling, models and estimates become more accurate. This improvement enables better management of moose populations.</p>
<p><em>The development of the R package and the Shiny app was funded by the Government of Yukon.</em></p>
<div class="section level2">
<h2 id="install">Install<a class="anchor" aria-label="anchor" href="#install"></a>
</h2>
<p>Install dependencies and the package from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'dplyr'</span>, <span class="st">'DT'</span>, <span class="st">'ggiraph'</span>,<span class="st">'ggplot2'</span>, <span class="st">'kableExtra'</span>,</span>
<span>    <span class="st">'magrittr'</span>, <span class="st">'mapproj'</span>, <span class="st">'markdown'</span>, <span class="st">'MASS'</span>, <span class="st">'Matrix'</span>, <span class="st">'openxlsx'</span>,</span>
<span>    <span class="st">'partykit'</span>, <span class="st">'pbapply'</span>, <span class="st">'pscl'</span>, <span class="st">'purrr'</span>, <span class="st">'remotes'</span>, <span class="st">'shiny'</span>, <span class="st">'shinyBS'</span>,</span>
<span>    <span class="st">'shinydashboard'</span>, <span class="st">'VGAM'</span>, <span class="st">'rlang'</span>, <span class="st">'shinytest'</span>, <span class="st">'systemfonts'</span>,</span>
<span>    <span class="st">'testthat'</span>, <span class="st">'patchwork'</span>, <span class="st">'shinyjs'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'psolymos/moosecounter'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Load the package and set some options:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">moosecounter</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## modify options as needed</span></span>
<span><span class="fu"><a href="reference/mc_options.html">mc_options</a></span><span class="op">(</span>B<span class="op">=</span><span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<p>Load an example data from the Mayo:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## load/read data set</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/MayoMMU_QuerriedData.csv"</span>, </span>
<span>        package<span class="op">=</span><span class="st">"moosecounter"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Switch between modeling total vs. cows only:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## set response in options</span></span>
<span><span class="co">#switch_response("cows")</span></span>
<span><span class="fu"><a href="reference/total.html">switch_response</a></span><span class="op">(</span><span class="st">"total"</span><span class="op">)</span></span></code></pre></div>
<p>Define surveyed units and take a subset as needed (this also sets total cows value):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/total.html">mc_update_total</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p>Start univariate and multivariate exploration to see what drives the total population numbers:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## univariate exploration</span></span>
<span><span class="fu"><a href="reference/explore.html">mc_plot_univariate</a></span><span class="op">(</span><span class="st">"Subalp_Shrub_250buf"</span>, <span class="va">x</span>, <span class="st">"ZINB"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## multivariate exploration</span></span>
<span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ELC_Subalpine"</span>, <span class="st">"Fire1982_2012"</span>, <span class="st">"Fire8212_DEM815"</span>,</span>
<span>    <span class="st">"NALC_Needle"</span>, <span class="st">"NALC_Shrub"</span>, <span class="st">"Subalp_Shrub_250buf"</span>,</span>
<span>    <span class="st">"ELCSub_Fire8212DEM815"</span>, <span class="st">"SubShrub250_Fire8212DEM815"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/explore.html">mc_plot_multivariate</a></span><span class="op">(</span><span class="va">vars</span>, <span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p>Now it is time to build a list of models for the total Moose models:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## build model list</span></span>
<span><span class="va">ML</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">ML</span><span class="op">[[</span><span class="st">"Model 0"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/total.html">mc_fit_total</a></span><span class="op">(</span><span class="va">x</span>, dist<span class="op">=</span><span class="st">"ZINB"</span>, weighted<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">ML</span><span class="op">[[</span><span class="st">"Model 1"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/total.html">mc_fit_total</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">vars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, dist<span class="op">=</span><span class="st">"ZINB"</span>, weighted<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">ML</span><span class="op">[[</span><span class="st">"Model 2"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/total.html">mc_fit_total</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">vars</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, dist<span class="op">=</span><span class="st">"ZIP"</span>, weighted<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">ML</span><span class="op">[[</span><span class="st">"Model 3"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/total.html">mc_fit_total</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">vars</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, dist<span class="op">=</span><span class="st">"ZINB"</span>, weighted<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Compare estimates and plot residuals:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/total.html">mc_models_total</a></span><span class="op">(</span><span class="va">ML</span>, <span class="va">x</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/total.html">mc_plot_residuals</a></span><span class="op">(</span><span class="st">"Model 3"</span>, <span class="va">ML</span>, <span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p>Calculate prediction intervals (PI) for total moose predictions:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## PI calculation</span></span>
<span><span class="va">PI</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/total.html">mc_predict_total</a></span><span class="op">(</span></span>
<span>    model_id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Model 1"</span>, <span class="st">"Model 3"</span><span class="op">)</span>,</span>
<span>    ml<span class="op">=</span><span class="va">ML</span>,</span>
<span>    x<span class="op">=</span><span class="va">x</span>,</span>
<span>    do_boot<span class="op">=</span><span class="cn">TRUE</span>, do_avg<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Get summaries and visualize the results for total Moose:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/total.html">mc_get_pred</a></span><span class="op">(</span><span class="va">PI</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/total.html">pred_density_moose_PI</a></span><span class="op">(</span><span class="va">PI</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/total.html">mc_plot_predpi</a></span><span class="op">(</span><span class="va">PI</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/total.html">mc_plot_pidistr</a></span><span class="op">(</span><span class="va">PI</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/total.html">mc_plot_pidistr</a></span><span class="op">(</span><span class="va">PI</span>, id<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="composition">Composition<a class="anchor" aria-label="anchor" href="#composition"></a>
</h2>
<p>Continuing with the Mayo data. Checks comp data (sum of classes should equal total):</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/comp.html">mc_check_comp</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p>Explore relationships:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot univariate comp model</span></span>
<span><span class="fu"><a href="reference/explore.html">mc_plot_comp</a></span><span class="op">(</span><span class="st">"Fire8212_DEM815"</span>, <span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p>Build a model list for composition:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CML</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">CML</span><span class="op">[[</span><span class="st">'FireDEMSub'</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/comp.html">mc_fit_comp</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"Fire8212_DEM815"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/comp.html">mc_models_comp</a></span><span class="op">(</span><span class="va">CML</span><span class="op">)</span></span></code></pre></div>
<p>Calculate prediction intervals for composition:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CPI</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/comp.html">mc_predict_comp</a></span><span class="op">(</span></span>
<span>    total_model_id<span class="op">=</span><span class="st">"Model 3"</span>,</span>
<span>    comp_model_id<span class="op">=</span><span class="st">'FireDEMSub'</span>,</span>
<span>    model_list_total<span class="op">=</span><span class="va">ML</span>,</span>
<span>    model_list_comp<span class="op">=</span><span class="va">CML</span>,</span>
<span>    x<span class="op">=</span><span class="va">x</span>,</span>
<span>    do_avg<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># print results</span></span>
<span><span class="fu"><a href="reference/comp.html">pred_density_moose_CPI</a></span><span class="op">(</span><span class="va">CPI</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="shiny-app">Shiny app<a class="anchor" aria-label="anchor" href="#shiny-app"></a>
</h2>
<p>Instead of using the command line, you can conduct the analyses, including total Moose and composition, using an interactive Shiny application:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/run_app.html">run_app</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2" class="external-link">GPL-2</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing moosecounter</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Peter Solymos <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Peter Solymos.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
