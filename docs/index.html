<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adaptive Moose Surveys • moosecounter</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Adaptive Moose Surveys">
<meta property="og:description" content="Adaptive Moose surveys.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-55877016-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-55877016-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">moosecounter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="moosecounter">moosecounter<a class="anchor" aria-label="anchor" href="#moosecounter"></a>
</h1></div>
<blockquote>
<p>Adaptive Moose Surveys</p>
</blockquote>
<p>The R package and Shiny app implements count models to aid in estimating Moose populations and composition. Analyses are based on surveyed cells, residuals, point predictions, and prediction uncertainty help analysts to adaptively survey sampling units. As a result of adaptive sampling, models and estimates become more accurate. This improvement enables better management of moose populations.</p>
<p><em>The development of the R package and the Shiny app was funded by the Government of Yukon.</em></p>
<div class="section level2">
<h2 id="install">Install<a class="anchor" aria-label="anchor" href="#install"></a>
</h2>
<p>Install dependencies and the package from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'dplyr'</span>, <span class="st">'DT'</span>, <span class="st">'ggiraph'</span>,<span class="st">'ggplot2'</span>, <span class="st">'kableExtra'</span>,
    <span class="st">'magrittr'</span>, <span class="st">'mapproj'</span>, <span class="st">'markdown'</span>, <span class="st">'MASS'</span>, <span class="st">'Matrix'</span>, <span class="st">'openxlsx'</span>,
    <span class="st">'partykit'</span>, <span class="st">'pbapply'</span>, <span class="st">'pscl'</span>, <span class="st">'purrr'</span>, <span class="st">'remotes'</span>, <span class="st">'shiny'</span>, <span class="st">'shinyBS'</span>,
    <span class="st">'shinydashboard'</span><span class="op">)</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'psolymos/moosecounter'</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Load the package and set some options:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">moosecounter</span><span class="op">)</span>

<span class="co">## modify options as needed</span>
<span class="fu"><a href="reference/mc_options.html">mc_options</a></span><span class="op">(</span>B<span class="op">=</span><span class="fl">20</span><span class="op">)</span></code></pre></div>
<p>Load an example data from the Mayo:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## load/read data set</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/MayoMMU_QuerriedData.csv"</span>, 
        package<span class="op">=</span><span class="st">"moosecounter"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Switch between modeling total vs. cows only:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## set response in options</span>
<span class="co">#switch_response("cows")</span>
<span class="fu"><a href="reference/switch_response.html">switch_response</a></span><span class="op">(</span><span class="st">"total"</span><span class="op">)</span></code></pre></div>
<p>Ddefine surveyed units and take a subset as needed (this also sets total cows value):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mc_update_total.html">mc_update_total</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<p>Start univariate and multivariate exploration to see what drives the total population numbers:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## univariate exploration</span>
<span class="fu"><a href="reference/mc_plot_univariate.html">mc_plot_univariate</a></span><span class="op">(</span><span class="st">"Subalp_Shrub_250buf"</span>, <span class="va">x</span>, <span class="st">"ZINB"</span><span class="op">)</span>

<span class="co">## multivariate exploration</span>
<span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ELC_Subalpine"</span>, <span class="st">"Fire1982_2012"</span>, <span class="st">"Fire8212_DEM815"</span>,
    <span class="st">"NALC_Needle"</span>, <span class="st">"NALC_Shrub"</span>, <span class="st">"Subalp_Shrub_250buf"</span>,
    <span class="st">"ELCSub_Fire8212DEM815"</span>, <span class="st">"SubShrub250_Fire8212DEM815"</span><span class="op">)</span>

<span class="fu"><a href="reference/mc_plot_multivariate.html">mc_plot_multivariate</a></span><span class="op">(</span><span class="va">vars</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<p>Now it is time to build a list of models for the total Moose models:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## build model list</span>
<span class="va">ML</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">ML</span><span class="op">[[</span><span class="st">"Model 0"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mc_fit_total.html">mc_fit_total</a></span><span class="op">(</span><span class="va">x</span>, dist<span class="op">=</span><span class="st">"ZINB"</span>, weighted<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="va">ML</span><span class="op">[[</span><span class="st">"Model 1"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mc_fit_total.html">mc_fit_total</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">vars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, dist<span class="op">=</span><span class="st">"ZINB"</span>, weighted<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="va">ML</span><span class="op">[[</span><span class="st">"Model 2"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mc_fit_total.html">mc_fit_total</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">vars</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, dist<span class="op">=</span><span class="st">"ZIP"</span>, weighted<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="va">ML</span><span class="op">[[</span><span class="st">"Model 3"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mc_fit_total.html">mc_fit_total</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">vars</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, dist<span class="op">=</span><span class="st">"ZINB"</span>, weighted<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Compare estimates and plot residuals:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/mc_models_total.html">mc_models_total</a></span><span class="op">(</span><span class="va">ML</span>, <span class="va">x</span><span class="op">)</span>
<span class="fu"><a href="reference/mc_plot_residuals.html">mc_plot_residuals</a></span><span class="op">(</span><span class="st">"Model 3"</span>, <span class="va">ML</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<p>Calculate prediction intervals (PI) for total moose predictions:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## PI calculation</span>
<span class="va">PI</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mc_predict_total.html">mc_predict_total</a></span><span class="op">(</span>
    model_id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Model 1"</span>, <span class="st">"Model 3"</span><span class="op">)</span>,
    ml<span class="op">=</span><span class="va">ML</span>,
    x<span class="op">=</span><span class="va">x</span>,
    do_boot<span class="op">=</span><span class="cn">TRUE</span>, do_avg<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Get summaries and visualize the results for total Moose:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/mc_get_pred.html">mc_get_pred</a></span><span class="op">(</span><span class="va">PI</span><span class="op">)</span>
<span class="fu"><a href="reference/pred_density_moose_PI.html">pred_density_moose_PI</a></span><span class="op">(</span><span class="va">PI</span><span class="op">)</span>
<span class="fu"><a href="reference/mc_plot_predpi.html">mc_plot_predpi</a></span><span class="op">(</span><span class="va">PI</span><span class="op">)</span>
<span class="fu"><a href="reference/mc_plot_pidistr.html">mc_plot_pidistr</a></span><span class="op">(</span><span class="va">PI</span><span class="op">)</span>
<span class="fu"><a href="reference/mc_plot_pidistr.html">mc_plot_pidistr</a></span><span class="op">(</span><span class="va">PI</span>, id<span class="op">=</span><span class="fl">2</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="composition">Composition<a class="anchor" aria-label="anchor" href="#composition"></a>
</h2>
<p>Continuing with the Mayo data. Checks comp data (sum of classes should equal total):</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/mc_check_comp.html">mc_check_comp</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<p>Explore relationships:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># plot univariate comp model</span>
<span class="fu"><a href="reference/mc_plot_comp.html">mc_plot_comp</a></span><span class="op">(</span><span class="st">"Fire8212_DEM815"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<p>Build a model list for composition:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">CML</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">CML</span><span class="op">[[</span><span class="st">'FireDEMSub'</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mc_fit_comp.html">mc_fit_comp</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"Fire8212_DEM815"</span><span class="op">)</span>

<span class="fu"><a href="reference/mc_models_comp.html">mc_models_comp</a></span><span class="op">(</span><span class="va">CML</span><span class="op">)</span></code></pre></div>
<p>Calculate prediction intervals for composition:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">CPI</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mc_predict_comp.html">mc_predict_comp</a></span><span class="op">(</span>
    total_model_id<span class="op">=</span><span class="st">"Model 3"</span>,
    comp_model_id<span class="op">=</span><span class="st">'FireDEMSub'</span>,
    model_list_total<span class="op">=</span><span class="va">ML</span>,
    model_list_comp<span class="op">=</span><span class="va">CML</span>,
    x<span class="op">=</span><span class="va">x</span>,
    do_avg<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="co"># print results</span>
<span class="fu"><a href="reference/pred_density_moose_CPI.html">pred_density_moose_CPI</a></span><span class="op">(</span><span class="va">CPI</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="shiny-app">Shiny app<a class="anchor" aria-label="anchor" href="#shiny-app"></a>
</h2>
<p>Instead of using the command line, you can conduct the analyses, including total Moose and composition, using an interactive Shiny application:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/run_app.html">run_app</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2" class="external-link">GPL-2</a></li>
</ul>
</div>


<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Peter Solymos <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Peter Solymos.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.9000.9000.9000.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
